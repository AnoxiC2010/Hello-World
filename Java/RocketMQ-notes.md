# RocketMq notes

# 简介

消息中间件是什么？

中间件：顾名思义 介于两者之间的⼀个技术

A-------------中间-------------B

消息中间件：消息中间件利⽤⾼效可靠的消息传递机制进⾏平台⽆关的数据交流，并基于数据通信来进⾏分布式系统的集成。



RocketMQ是什么？

RocketMQ是阿⾥巴巴开源的⼀个消息中间件，是⼀个队列模型的消息中间件，具有⾼性能、⾼可靠、⾼实时、分布式特点。⽬前已贡献给apache



参考阅读链接：[RocketMQ的前世今⽣](https://yq.aliyun.com/articles/66129)



# 功能

## 异步化

将⼀些可以进⾏异步化的操作通过发送消息来进⾏异步化，提⾼效率

具体场景：⽤户为了使⽤某个应⽤，进⾏注册，系统需要发送注册邮件并验证短信。对这两个操作的处理⽅式有两种：串⾏及并⾏。

1. 串⾏⽅式：新注册信息⽣成后，先发送注册邮件，再发送验证短信

   ![image-20210621230907185](C:\Users\AnoxiC2010\Documents\GitHub\Hello-World\Java\RocketMQ-notes.assets\image-20210621230907185.png)

   在这种⽅式下，需要最终发送验证短信后再返回给客户端。

2. 并⾏处理：新注册信息写⼊后，发短信和发邮件并⾏处理

   ![image-20210621231007849](C:\Users\AnoxiC2010\Documents\GitHub\Hello-World\Java\RocketMQ-notes.assets\image-20210621231007849.png)

   在这种⽅式下，发短信和发邮件 需处理完成后再返回给客户端。
   假设以上三个⼦系统处理的时间均为50ms，且不考虑⽹络延迟，则总的处理时间：
   串⾏：50 + 50 + 50 = 150ms 并⾏：50 + 50 = 100ms

3. 使⽤消息队列

   ![image-20210621231100584](C:\Users\AnoxiC2010\Documents\GitHub\Hello-World\Java\RocketMQ-notes.assets\image-20210621231100584.png)

   并在写⼊消息队列后⽴即返回成功给客户端，则总的响应时间依赖于写⼊消息队列的时间，⽽写⼊消息队列的时间本身是可以很快的，基本可以忽略不计，因此总的处理时间相⽐串⾏提⾼了2倍，相⽐并⾏提⾼了⼀倍；



## 限流削峰

在⾼并发场景下把请求存⼊消息队列，利⽤排队思想降低系统瞬间峰值
具体场景：购物⽹站开展秒杀活动，⼀般由于瞬时访问量过⼤，服务器接收过⼤，会导致流量暴增，相关系统⽆法处理请求甚⾄崩溃。⽽加⼊消息队列后，系统可以从消息队列中取数据，相当于消息队列做了⼀次缓冲。

![image-20210621231232743](C:\Users\AnoxiC2010\Documents\GitHub\Hello-World\Java\RocketMQ-notes.assets\image-20210621231232743.png)

优点：
1. 请求先⼊消息队列，⽽不是由业务处理系统直接处理，做了⼀次缓冲,极⼤地减少了业务处理系统的压⼒；
2. 队列⻓度可以做限制，事实上，秒杀时，后⼊队列的⽤户⽆法秒杀到商品，这些请求可以直接被抛弃，返回活动已结束或商品已售完信息；



对⽐

消息中间件不仅仅只有RocketMQ，市⾯上还有很多其他的消息中间件，这⾥列举⼏个常⻅的和
RocketMQ作为⼀个对⽐
ActiveMQ：ActiveMQ 是Apache出品，最流⾏的，能⼒强劲的开源消息总线。ActiveMQ 是⼀个完全
⽀持JMS1.1和J2EE 1.4规范的 JMS Provider实现。

